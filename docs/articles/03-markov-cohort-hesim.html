<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Markov Cohort Model wth hesim • rcea</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Markov Cohort Model wth hesim">
<meta property="og:description" content="rcea">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rcea</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01-markov-cohort.html">Simple Markov Cohort Model</a>
    </li>
    <li>
      <a href="../articles/02-markov-cohort-psa.html">Incorporating Probabilistic Sensitivity Analysis</a>
    </li>
    <li>
      <a href="../articles/03-markov-cohort-hesim.html">Markov Cohort Model with hesim</a>
    </li>
    <li>
      <a href="../articles/04-mstate.html">Semi-Markov Multi-state Model</a>
    </li>
    <li>
      <a href="../articles/05-psm.html">Partitioned Survival Model</a>
    </li>
    <li>
      <a href="../articles/06-cea.html">Cost-effectiveness Analysis</a>
    </li>
    <li class="divider">
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/hesim-dev/ispor-short-course/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Markov Cohort Model wth hesim</h1>
            
            <h4 class="date">2020-09-08</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/hesim-dev/ispor-short-course/blob/master/vignettes/03-markov-cohort-hesim.Rmd"><code>vignettes/03-markov-cohort-hesim.Rmd</code></a></small>
      <div class="hidden name"><code>03-markov-cohort-hesim.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level1">
<h1 class="hasAnchor">
<a href="#overview" class="anchor"></a><span class="header-section-number">1</span> Overview</h1>
<p>This tutorial repeats the probabilistic sensitivity analysis (PSA) of Markov cohort model simulation performed in the <a href="02-markov-cohort-psa.html">previous tutorial</a> using <code>hesim</code>. More information about <code>hesim</code> can be found by visiting the <a href="https://hesim-dev.github.io/hesim/">package website</a>. We recommend reading the “Articles”—starting with the <a href="https://hesim-dev.github.io/hesim/articles/intro.html">“Introduction to <code>hesim</code>”</a>—to learn more.</p>
<p>Markov cohort models (time-homogeneous and time-homogeneous) are referred to as cohort discrete time state transition models (<code>cDTSTMs</code>) in <code>hesim</code>. They are most conveniently simulated with a four step process by defining:</p>
<ol style="list-style-type: decimal">
<li>
<em>Data</em> consisting of the treatment strategies and patient population</li>
<li>
<em>Parameter</em> objects storing the values of all parameters used in the model</li>
<li>
<em>Random number generation</em> expressions that randomly generate probability distributions for the parameters for probabilistic sensitivity analysis (PSA)</li>
<li>
<em>Transformed parameter</em> expressions that transform the parameter estimates into values used for simulation</li>
</ol>
<p>This analysis can be performed using the <code>hesim</code> package alone.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"hesim"</span>)</pre></body></html></div>
</div>
<div id="define-the-model" class="section level1">
<h1 class="hasAnchor">
<a href="#define-the-model" class="anchor"></a><span class="header-section-number">2</span> Define the model</h1>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a><span class="header-section-number">2.1</span> Data</h2>
<p>Before beginning an analysis, it is necessary to define the treatment strategies of interest and the the target population of interest. We continue to run an analysis for two treatment strategies (“SOC” and the “New” treatment) and one representative 25-year old patient.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">strategies</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
  <span class="kw">strategy_id</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fl">2</span>,
  <span class="kw">strategy_name</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"SOC"</span>, <span class="st">"New"</span>)
)
<span class="no">patients</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
  <span class="kw">patient_id</span> <span class="kw">=</span> <span class="fl">1</span>,
  <span class="kw">age</span> <span class="kw">=</span> <span class="fl">25</span>
)
<span class="no">hesim_dat</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/hesim/man/hesim_data.html">hesim_data</a></span>(
  <span class="kw">strategies</span> <span class="kw">=</span> <span class="no">strategies</span>,
  <span class="kw">patients</span> <span class="kw">=</span> <span class="no">patients</span>
)
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">hesim_dat</span>)</pre></body></html></div>
<pre><code>## $strategies
##   strategy_id strategy_name
## 1           1           SOC
## 2           2           New
## 
## $patients
##   patient_id age
## 1          1  25
## 
## attr(,"class")
## [1] "hesim_data"</code></pre>
<p>The model will be simulated for each treatment strategy and representative patient combination. Such data containing treatment strategy and patient characteristics can be generated using <code><a href="https://rdrr.io/pkg/hesim/man/expand.html">expand()</a></code>.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">data</span> <span class="kw">&lt;-</span> <span class="kw pkg">hesim</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/hesim/man/expand.html">expand</a></span>(<span class="no">hesim_dat</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"strategies"</span>, <span class="st">"patients"</span>))
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">data</span>)</pre></body></html></div>
<pre><code>##    strategy_id patient_id strategy_name age
## 1:           1          1           SOC  25
## 2:           2          1           New  25</code></pre>
</div>
<div id="parameters" class="section level2">
<h2 class="hasAnchor">
<a href="#parameters" class="anchor"></a><span class="header-section-number">2.2</span> Parameters</h2>
<p>We will use the same list of parameters as in the previous tutorial.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">params</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
  <span class="kw">alpha_soc</span> <span class="kw">=</span> <span class="no">transitions_soc</span>,
  <span class="kw">lrr_mean</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span>(<span class="fl">.8</span>),
  <span class="kw">lrr_lower</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span>(<span class="fl">.71</span>),
  <span class="kw">lrr_upper</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span>(<span class="fl">.9</span>),
  <span class="kw">c_medical</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">H</span> <span class="kw">=</span> <span class="fl">2000</span>, <span class="kw">S1</span> <span class="kw">=</span> <span class="fl">4000</span>, <span class="kw">S2</span> <span class="kw">=</span> <span class="fl">15000</span>),
  <span class="kw">c_soc</span> <span class="kw">=</span> <span class="fl">2000</span>,
  <span class="kw">c_new</span> <span class="kw">=</span> <span class="fl">12000</span>,
  <span class="kw">u_mean</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">H</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">S1</span> <span class="kw">=</span> <span class="fl">.075</span>, <span class="kw">S2</span> <span class="kw">=</span> <span class="fl">0.5</span>),
  <span class="kw">u_se</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">H</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">S1</span> <span class="kw">=</span> <span class="fl">0.03</span>, <span class="kw">S2</span> <span class="kw">=</span> <span class="fl">0.05</span>)
)</pre></body></html></div>
</div>
<div id="random-number-generation" class="section level2">
<h2 class="hasAnchor">
<a href="#random-number-generation" class="anchor"></a><span class="header-section-number">2.3</span> Random number generation</h2>
<p>The random number generation process for the PSA is once again defined using <code><a href="https://rdrr.io/pkg/hesim/man/define_rng.html">define_rng()</a></code>.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">rng_def</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/hesim/man/define_rng.html">define_rng</a></span>({
  <span class="no">lrr_se</span> <span class="kw">&lt;-</span> (<span class="no">lrr_upper</span> - <span class="no">lrr_lower</span>)/(<span class="fl">2</span> * <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">qnorm</a></span>(<span class="fl">.975</span>)) <span class="co"># Local object </span>
                                                      <span class="co"># not returned</span>
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>( <span class="co"># Parameters to return</span>
    <span class="kw">p_soc</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/hesim/man/rng_distributions.html">dirichlet_rng</a></span>(<span class="no">alpha_soc</span>),
    <span class="kw">rr_new</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/hesim/man/rng_distributions.html">lognormal_rng</a></span>(<span class="no">lrr_mean</span>, <span class="no">lrr_se</span>),
    <span class="kw">c_medical</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/hesim/man/rng_distributions.html">gamma_rng</a></span>(<span class="kw">mean</span> <span class="kw">=</span> <span class="no">c_medical</span>, <span class="kw">sd</span> <span class="kw">=</span> <span class="no">c_medical</span>),
    <span class="kw">c_soc</span> <span class="kw">=</span> <span class="no">c_soc</span>,
    <span class="kw">c_new</span> <span class="kw">=</span> <span class="no">c_new</span>,
    <span class="kw">u</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/hesim/man/rng_distributions.html">beta_rng</a></span>(<span class="kw">mean</span> <span class="kw">=</span> <span class="no">u_mean</span>, <span class="kw">sd</span> <span class="kw">=</span> <span class="no">u_se</span>)
  )
}, <span class="kw">n</span> <span class="kw">=</span> <span class="fl">1000</span>)</pre></body></html></div>
</div>
<div id="transformed-parameters" class="section level2">
<h2 class="hasAnchor">
<a href="#transformed-parameters" class="anchor"></a><span class="header-section-number">2.4</span> Transformed parameters</h2>
<p>The next step in <code>hesim</code> is to “transform” the parameters for use in the economic model using <code><a href="https://rdrr.io/pkg/hesim/man/define_tparams.html">define_tparams()</a></code>. This typically involves modeling them as a function of the treatment strategies and patient (i.e., the <code>data</code>). To maximize computational efficiency, all operations are vectorized across the rows in the data. Parameters not include in a transformed parameter function are assumed constant across patients and treatment strategies.</p>
<p>A <code><a href="https://rdrr.io/pkg/hesim/man/define_tparams.html">define_tparams()</a></code> block must return a named list with the following possible elements:</p>
<ul>
<li>
<strong>tpmatrix</strong>: The transition probability matrix used to simulate transition probabilities in the economic model.</li>
<li>
<strong>utility</strong>: The utility values to attach to states and used to simulate quality-adjusted life-years in the economic model. Either a vector (in which case utility is the same in each health state) or a matrix with a column for each (non-death) health state.</li>
<li>
<strong>costs</strong>: A named list of costs for each category used to simulate costs in the economic model. Each element of the list must be in the same format as utility.</li>
</ul>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">tparams_def</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/hesim/man/define_tparams.html">define_tparams</a></span>({
  <span class="co">## The treatment effect (relative risk) is transformed so that it varies by </span>
  <span class="co">## strategies (SOC is the reference strategy)</span>
  <span class="no">rr</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="no">strategy_name</span> <span class="kw">==</span> <span class="st">"SOC"</span>, <span class="fl">1</span>, <span class="no">rr_new</span>)

  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
    <span class="kw">tpmatrix</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/hesim/man/tpmatrix.html">tpmatrix</a></span>(
      <span class="no">C</span>,          <span class="no">p_soc</span>$<span class="no">h_s1</span> * <span class="no">rr</span>, <span class="no">p_soc</span>$<span class="no">h_s2</span> * <span class="no">rr</span>,  <span class="no">p_soc</span>$<span class="no">h_d</span> * <span class="no">rr</span>,
      <span class="no">p_soc</span>$<span class="no">s1_h</span>, <span class="no">C</span>,               <span class="no">p_soc</span>$<span class="no">s1_s2</span> * <span class="no">rr</span>, <span class="no">p_soc</span>$<span class="no">s1_d</span> * <span class="no">rr</span>,
      <span class="no">p_soc</span>$<span class="no">s2_h</span>, <span class="no">p_soc</span>$<span class="no">s2_s1</span>,     <span class="no">C</span>,                <span class="no">p_soc</span>$<span class="no">s2_d</span> * <span class="no">rr</span>,
      <span class="fl">0</span>,          <span class="fl">0</span>,               <span class="fl">0</span>,                <span class="fl">1</span>
    ),
    <span class="kw">utility</span> <span class="kw">=</span> <span class="no">u</span>,
    <span class="kw">costs</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
      <span class="kw">treatment</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="no">strategy_name</span> <span class="kw">==</span> <span class="st">"SOC"</span>, <span class="no">c_soc</span>, <span class="no">c_new</span>),
      <span class="kw">medical</span> <span class="kw">=</span> <span class="no">c_medical</span>
    )
  )
})</pre></body></html></div>
</div>
<div id="the-model" class="section level2">
<h2 class="hasAnchor">
<a href="#the-model" class="anchor"></a><span class="header-section-number">2.5</span> The model</h2>
<p>The model is defined using <code><a href="https://rdrr.io/pkg/hesim/man/define_model.html">define_model()</a></code> function. The names of transition probability matrix, utility, and cost objects are specified.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">mod_def</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/hesim/man/define_model.html">define_model</a></span>(<span class="kw">tparams_def</span> <span class="kw">=</span> <span class="no">tparams_def</span>,
                        <span class="kw">rng_def</span> <span class="kw">=</span> <span class="no">rng_def</span>,
                        <span class="kw">params</span> <span class="kw">=</span> <span class="no">params</span>)</pre></body></html></div>
</div>
</div>
<div id="simulation" class="section level1">
<h1 class="hasAnchor">
<a href="#simulation" class="anchor"></a><span class="header-section-number">3</span> Simulation</h1>
<p>A economic model (of class <code>CohortDtstm</code>) can be created from a defined model (of class <code>model_def</code>) and data using the generic function <code><a href="https://rdrr.io/pkg/hesim/man/create_CohortDtstm.html">create_CohortDtstm()</a></code>. The economic model is an <code>R6</code> object consisting of a transition model (<code>trans_model</code>) for simulating transition probabilities with <code>sim_stateprobs()</code>, a utility model for simulating quality-adjusted life-years with <code><a href="https://rdrr.io/pkg/hesim/man/sim_ev.html">sim_qalys()</a></code>, and a set of cost models (for each cost category) for simulating costs with <code><a href="https://rdrr.io/pkg/hesim/man/sim_ev.html">sim_costs()</a></code>.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">econmod</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/hesim/man/create_CohortDtstm.html">create_CohortDtstm</a></span>(<span class="no">mod_def</span>, <span class="no">data</span>)</pre></body></html></div>
<div id="health-state-probabilities" class="section level2">
<h2 class="hasAnchor">
<a href="#health-state-probabilities" class="anchor"></a><span class="header-section-number">3.1</span> Health state probabilities</h2>
<p>State occupancy probabilities are generated by simulating the discrete time Markov chain.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">econmod</span>$<span class="fu">sim_stateprobs</span>(<span class="kw">n_cycles</span> <span class="kw">=</span> <span class="fl">85</span>)</pre></body></html></div>
</div>
<div id="costs-and-qalys" class="section level2">
<h2 class="hasAnchor">
<a href="#costs-and-qalys" class="anchor"></a><span class="header-section-number">3.2</span> Costs and QALYs</h2>
<p>Costs and quality-adjusted life-years (QALYs) are computed by integrating the previously simulated state probabilities. To maintain consistency with our prior analyses, we measure costs and QALYs at the start of each model cycle using a left Riemann sum.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">econmod</span>$<span class="fu"><a href="https://rdrr.io/pkg/hesim/man/sim_ev.html">sim_qalys</a></span>(<span class="kw">dr</span> <span class="kw">=</span> <span class="fl">0.03</span>, <span class="kw">integrate_method</span> <span class="kw">=</span> <span class="st">"riemann_left"</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">econmod</span>$<span class="no">qalys_</span>)</pre></body></html></div>
<pre><code>##    sample strategy_id patient_id grp_id state_id   dr category      qalys
## 1:      1           1          1      1        1 0.03    qalys 15.5906734
## 2:      1           1          1      1        2 0.03    qalys  0.2794163
## 3:      1           1          1      1        3 0.03    qalys  4.0389875
## 4:      1           2          1      1        1 0.03    qalys 18.3427816
## 5:      1           2          1      1        2 0.03    qalys  0.2729247
## 6:      1           2          1      1        3 0.03    qalys  3.2769767</code></pre>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">econmod</span>$<span class="fu"><a href="https://rdrr.io/pkg/hesim/man/sim_ev.html">sim_costs</a></span>(<span class="kw">dr</span> <span class="kw">=</span> <span class="fl">0.03</span>, <span class="kw">integrate_method</span> <span class="kw">=</span> <span class="st">"riemann_left"</span>)</pre></body></html></div>
</div>
</div>
<div id="cost-effectiveness-analysis" class="section level1">
<h1 class="hasAnchor">
<a href="#cost-effectiveness-analysis" class="anchor"></a><span class="header-section-number">4</span> Cost-effectiveness analysis</h1>
<p>Cost-effectiveness analyses can be performed directly from the simulation output with <code>hesim</code> as described in more detail <a href="icea.html">here</a>. Other R packages such as <a href="https://sites.google.com/a/statistica.it/gianluca/bcea">BCEA</a> could also be considered. Here, we will consider a pairwise comparison between the new treatment and SOC with the <code><a href="https://rdrr.io/pkg/hesim/man/icea.html">hesim::icea_pw()</a></code> function.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="no">ce_sim</span> <span class="kw">&lt;-</span> <span class="no">econmod</span>$<span class="fu">summarize</span>()
<span class="no">icea_pw_out</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/hesim/man/icea.html">icea_pw</a></span>(<span class="no">ce_sim</span>, <span class="kw">comparator</span> <span class="kw">=</span> <span class="fl">1</span>,
                       <span class="kw">dr_qalys</span> <span class="kw">=</span> <span class="fl">0.03</span>, <span class="kw">dr_costs</span> <span class="kw">=</span> <span class="fl">0.03</span>,
                       <span class="kw">k</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0</span>, <span class="fl">25000</span>, <span class="fl">500</span>))</pre></body></html></div>
<p>Although <code><a href="https://rdrr.io/pkg/hesim/man/icea.html">icea_pw()</a></code> allows users to summarize a PSA we will just create an ICER table using means from the PSA for now. An analysis of PSA output will be covered in a later tutorial.</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/hesim/man/icer_tbl.html">icer_tbl</a></span>(<span class="no">icea_pw_out</span>, <span class="kw">colnames</span> <span class="kw">=</span> <span class="no">strategies</span>$<span class="no">strategy_name</span>)</pre></body></html></div>
<pre><code>##                   SOC New                           
## Incremental QALYs "-" "2.10 (0.99, 3.19)"           
## Incremental costs "-" "266,507 (213,324, 297,231)"  
## Incremental NMB   "-" "-161,680 (-222,054, -77,626)"
## ICER              "-" "127,117"                     
## Conclusion        "-" "Not cost-effective"</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Devin Incerti, Jeroen P. Jansen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
